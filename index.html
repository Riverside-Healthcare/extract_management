<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Dash" href="em/dash.html" />

    <link rel="shortcut icon" href="_static/favicon.ico"/><meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>Home - Extract Management 2.0</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">Extract Management 2.0</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="#">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/icon-512x512.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="em/dash.html">Dash</a></li>
<li class="toctree-l1"><a class="reference internal" href="em/projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="em/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="em/connections.html">Connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="em/admin.html">Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="em/development.html">Development</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="autoapi/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="autoapi/em_web/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/em_web/web/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/admin/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.admin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/assets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.assets</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/auth/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.auth</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/connection/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.connection</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/dashboard/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.dashboard</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/executors/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.executors</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/filters/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.filters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/project/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.project</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/table/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.table</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_web/web/task/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.web.task</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_web/extensions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.extensions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_web/model/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.model</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_web/seed/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_web.seed</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="autoapi/em_scheduler/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_scheduler</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_scheduler/events/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_scheduler.events</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_scheduler/extensions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_scheduler.extensions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_scheduler/functions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_scheduler.functions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_scheduler/model/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_scheduler.model</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_scheduler/web/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_scheduler.web</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="autoapi/em_runner/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/em_runner/scripts/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_cmd/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_cmd</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_code/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_code</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_date/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_date</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_file/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_file</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_ftp/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_ftp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_postgres/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_postgres</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_python/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_python</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_sftp/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_sftp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_smb/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_smb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_smtp/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_smtp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_sqlserver/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_sqlserver</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_ssh/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_ssh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/em_system/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.em_system</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/runner/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.runner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/scripts/smb_fix/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.scripts.smb_fix</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="autoapi/em_runner/web/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.web</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/web/filters/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.web.filters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/em_runner/web/web/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.web.web</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_runner/extensions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.extensions</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/em_runner/model/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">em_runner.model</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="extract-management-2-0-docs">
<h1>Extract Management 2.0 Docs<a class="headerlink" href="#extract-management-2-0-docs" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p><a class="reference external" href="#"><img alt="python-version" src="https://img.shields.io/badge/Python-3.7%20%7C%203.8%20%7C%203.9-blue"/></a></p>
</div>
<div class="section" id="extract-management-2-0">
<h1>Extract Management 2.0<a class="headerlink" href="#extract-management-2-0" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="_images/em2.png"><img alt="Demo Image" src="_images/em2.png" style="width: 100%;"/></a>
<p>Extract Management 2.0 is a task scheduling tool for getting data from a source and depositing it in a destination - sql servers to SFTP servers.</p>
<p>Tasks can run at any time and on any schedule.</p>
<p>Checkout the <a class="reference external" href="https://extract-management.herokuapp.com">demo site</a>!
Or, you can run your own docker image:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>docker run -i -t -p <span class="m">5003</span>:5003 -e <span class="nv">PORT</span><span class="o">=</span><span class="m">5003</span> -u <span class="m">0</span> christopherpickering/extract_management:latest
<span class="c1"># access on http://localhost:5003</span>
</pre></div>
</div>
<div class="section" id="how-to-use">
<h2>How To Use?<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>EM2 is a three part server:</p>
<ul class="simple">
<li><p>web app</p></li>
<li><p>scheduler</p></li>
<li><p>job runner</p></li>
</ul>
<p>EM2 runs with Nginx + Gunicorn. Three individual web services are created, the web app is the public web site and the other two (scheduler and runner) are internal API’s running on the web server.</p>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Currently EM2 is setup to install on an Ubuntu server, however with a few tweaks to the install script it will work well on most Linux.</p></li>
<li><p>curl or wget should be installed</p></li>
<li><p>Ideally, you will have your own git repository, holding updated config files, and will publish from there.</p></li>
</ul>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>An install script is provided to easily install EM2 onto your Ubuntu server. Update the <code class="docutils literal notranslate"><span class="pre">publish/install.sh</span></code> file “dns” value to be the dns of your server, and the “remote” to point to your repo path. If you plan to use ssl you can add the certs into the <code class="docutils literal notranslate"><span class="pre">publish</span></code> folder as well. Use names “cert.crt” and “cert.key”.</p>
<p>The publish takes place over SSH from a git server. It is possible to use an accesskey when publishing from fabric.</p>
<p>Update username and hostname with your planned login. Commands require sudo. <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">bash...</span></code></p>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 7%"/>
<col style="width: 93%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>fabric</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">publish</span> <span class="pre">&amp;&amp;</span> <span class="pre">fab</span> <span class="pre">publish</span> <span class="pre">&amp;&amp;</span> <span class="pre">cd</span> <span class="pre">..</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>curl</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-c</span> <span class="pre">"$(curl</span> <span class="pre">-kfsSL</span> <span class="pre">https://raw.githubusercontent.com/Riverside-Healthcare/extract_management/main/publish/install.sh)"</span></code></p></td>
</tr>
<tr class="row-even"><td><p>wget</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-c</span> <span class="pre">"$(wget</span> <span class="pre">-O-</span> <span class="pre">https://raw.githubusercontent.com/Riverside-Healthcare/extract_management/main/publish/install.sh)"</span></code></p></td>
</tr>
</tbody>
</table></div>
<p>After cloning the repo the <code class="docutils literal notranslate"><span class="pre">install.sh</span></code> script will install all packages necessary to start up the app.</p>
</div>
<div class="section" id="running-em2-locally">
<h3>Running EM2 Locally<a class="headerlink" href="#running-em2-locally" title="Permalink to this headline">¶</a></h3>
<p>EM2 can be run locally. We use pyenv and poetry to manage the project dependencies. Assuming you will too -</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pyenv <span class="nb">local</span> <span class="m">3</span>.9.0
poetry install

<span class="c1"># have you already created a database "em_web_dev" and updated the config files?</span>
<span class="nv">FLASK_APP</span><span class="o">=</span>em_web
flask db init
flask db migrate
flask db upgrade
flask seed
<span class="c1"># if you want some basic demo information added</span>
flask seed_demo
</pre></div>
</div>
<p>Finally, to run the three site, you will need to run each command in a separate termimal session:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">FLASK_ENV</span><span class="o">=</span>development <span class="o">&amp;&amp;</span> <span class="nv">FLASK_DEBUG</span><span class="o">=</span><span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">FLASK_APP</span><span class="o">=</span>em_web <span class="o">&amp;&amp;</span> flask run
<span class="nv">FLASK_ENV</span><span class="o">=</span>development <span class="o">&amp;&amp;</span> <span class="nv">FLASK_DEBUG</span><span class="o">=</span><span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">FLASK_APP</span><span class="o">=</span>em_scheduler <span class="o">&amp;&amp;</span> flask run --port<span class="o">=</span><span class="m">5001</span>
<span class="nv">FLASK_ENV</span><span class="o">=</span>development <span class="o">&amp;&amp;</span> <span class="nv">FLASK_DEBUG</span><span class="o">=</span><span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">FLASK_APP</span><span class="o">=</span>em_runner <span class="o">&amp;&amp;</span> flask run --port<span class="o">=</span><span class="m">5002</span>
</pre></div>
</div>
</div>
<div class="section" id="other-configuration-tips">
<h3>Other Configuration Tips<a class="headerlink" href="#other-configuration-tips" title="Permalink to this headline">¶</a></h3>
<p>If you use hostnames vs IP addresses in your config files be sure to update hosts file <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">/etc/hosts</span></code> to include the ip address of any internal domain hosts you will use. For example, LDAP server, GIT server, any databases you plan to query, etc.</p>
</div>
</div>
<div class="section" id="about-the-app">
<h2>About the App<a class="headerlink" href="#about-the-app" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-login-works">
<h3>How Login Works<a class="headerlink" href="#how-login-works" title="Permalink to this headline">¶</a></h3>
<p>Login is done through LDAP and follows this basic process Note: the python package python-simpleldap has been customized slightly to work with our ldap setup.</p>
<ol class="arabic simple">
<li><p>config.py file holds the general connection info. A connection to the ldap server is made with the user credentials supplied in the config file.</p></li>
<li><p>Once a connection is established and a user attempts to access the site the simpleldap package first verifies that the user exists, by doing a search for the user. If the user exists we save their details and groups.</p></li>
<li><p>If the user exists then we attempt to log them in.. this returns true if they had a valid username/pass.</p></li>
<li><p>Finally, as this site is restricted to Analytics group users, we only allow users that have the “Analytics” group on their profile.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>once logged in the user_id is kept in the server “session”. When a user logs out we just drop the user_id from the session.</p>
</div>
</div>
<div class="section" id="data-flow">
<h3>Data Flow<a class="headerlink" href="#data-flow" title="Permalink to this headline">¶</a></h3>
<p>Project name and schedule are created &gt; tasks can be added to the project.</p>
<p>Task are completely independent, the order of tasks is not respected and tasks may run in parallel. The purpose of allowing multiple tasks is to keep a clean grouping of tasks that belong to the same data project.</p>
<p>The tasks in a job can individually be started or stopped.</p>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>Code (python/javascript/css/html) is all tested with tox:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>tox
</pre></div>
</div>
</div>
<div class="section" id="webserver-info">
<h3>Webserver Info<a class="headerlink" href="#webserver-info" title="Permalink to this headline">¶</a></h3>
<p>EM2 uses three web services for a few reasons -</p>
<ul class="simple">
<li><p>Splitting the UI from the running tasks improves the user experience</p></li>
<li><p>The scheduler must run on only 1 web worker, while we would like as many workers as possible for the runner.</p></li>
<li><p>API’s are cool.</p></li>
</ul>
<p>In the EM2 admin screen there is an option to retart the web services. For this option to work you may need to give you webapp user sudo permission, or:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo visudo

<span class="c1"># add this line to the end.. assuming the webapp usergroup is "webapp"</span>
%webapp <span class="nv">ALL</span><span class="o">=</span>NOPASSWD: /bin/systemctl daemon-reload
%webapp <span class="nv">ALL</span><span class="o">=</span>NOPASSWD: /bin/systemctl restart *
</pre></div>
</div>
<p>If you will have “long running” tasks, it may be wise to increase the nginx timeout. (Gunicorn timeouts are already increased in the app install files.)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># open nginx config</span>
sudo nano /etc/nginx/nginx.conf

<span class="c1"># add these in the http secion. all for good luck...</span>
fastcgi_connect_timeout 999s<span class="p">;</span>
proxy_connect_timeout 999s<span class="p">;</span>
proxy_read_timeout 999s<span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<p>Atlas was created by the Riverside Healthcare Analytics team -</p>
<ul class="simple">
<li><p>Paula Courville</p></li>
<li><p><a class="reference external" href="https://www.linkedin.com/in/darrel-drake-57562529">Darrel Drake</a></p></li>
<li><p><a class="reference external" href="https://github.com/DHillebrand2016">Dee Anna Hillebrand</a></p></li>
<li><p><a class="reference external" href="https://github.com/Scott-Manley">Scott Manley</a></p></li>
<li><p><a class="reference external" href="mailto:mmatz%40RHC.net">Madeline Matz</a></p></li>
<li><p><a class="reference external" href="https://github.com/christopherpickering">Christopher Pickering</a></p></li>
<li><p><a class="reference external" href="https://github.com/danryan1011">Dan Ryan</a></p></li>
<li><p><a class="reference external" href="https://github.com/schiss152">Richard Schissler</a></p></li>
<li><p><a class="reference external" href="https://github.com/eshultz">Eric Shultz</a></p></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="em/dash.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Dash</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          
        </div>

        <div class="related-information">
              Copyright &#169; 2020, Riverside Healthcare
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/index.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Extract Management 2.0 Docs</a></li>
<li><a class="reference internal" href="#extract-management-2-0">Extract Management 2.0</a><ul>
<li><a class="reference internal" href="#how-to-use">How To Use?</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#running-em2-locally">Running EM2 Locally</a></li>
<li><a class="reference internal" href="#other-configuration-tips">Other Configuration Tips</a></li>
</ul>
</li>
<li><a class="reference internal" href="#about-the-app">About the App</a><ul>
<li><a class="reference internal" href="#how-login-works">How Login Works</a></li>
<li><a class="reference internal" href="#data-flow">Data Flow</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#webserver-info">Webserver Info</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credits">Credits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>