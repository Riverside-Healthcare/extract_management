{#
    Extract Management 2.0
    Copyright (C) 2020  Riverside Healthcare, Kankakee, IL

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
#}
{% extends "layout.html.j2" %}

{% block css %}
	{% assets "css_admin" %}
		<link type="text/css" rel="stylesheet" href="{{ ASSET_URL }}" />
	{% endassets %}
{% endblock %}

{% block js %}
	{% assets "js_admin" %}
		<script type="text/javascript" src="{{ ASSET_URL }}"></script>
	{% endassets %}
{% endblock %}

{% block body %}
	<h1 class="em-title">Admin Area</h1>

	{% with messages = get_flashed_messages() %}
	  {% if messages %}
	    <ul class=flashes>
	    {% for message in messages %}
	      <li>{{ message }}</li>
	    {% endfor %}
	    </ul>
	  {% endif %}
	{% endwith %}

	<h2 class="em-title">App Tasks</h2>
	<div class="em-tools">
		<a href="/admin/clearlog">Clear all logs</a>
		<a href="/admin/resetTasks">Reset all tasks to completed</a>
	</div>

	<h2 class="em-title">Scheduler Tasks</h2>
	<div class="em-tools">
		<a href="/admin/emptyScheduler" onclick="return confirm('Are you sure? Go to Dash > Error > Reschedule all to restart.')">Empty Scheduler</a>
		<a href="/admin/pauseJobs">Pause All Jobs</a>
		<a href="/admin/resumeJobs">Resume Enabled Jobs</a>
		<a href="/admin/stopJobs" onclick="return confirm('Are you sure? Click Restart Web Service to start again.')">Gracefully Stop Scheduler</a>
		<a href="/admin/killJobs" onclick="return confirm('Are you sure? Click Restart Web Service to start again.')">Kill Scheduler</a>
	</div>
	<h2 class="em-title">Server Tasks</h2>
	<div class="em-tools">
	
		<a href="/admin/reloadDaemon">Reload Web Service</a>
		<a href="/admin/restartDaemon">Restart Web Service</a>
		<a href="/admin/whoami">Whoami</a>
	</div>


	<h2>User Task History</h2>
	<div class="em-ajaxTable" data-src="/admin/user/tasklog"><div class="loader-typing"><img src="/static/img/typing.gif"></div></div>

	<h2>User Login History</h2>
	<div class="em-ajaxTable" data-src="/admin/user/loginlog"><div class="loader-typing"><img src="/static/img/typing.gif"></div></div>


{% endblock %}